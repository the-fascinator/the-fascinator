##
## Velocity macros for The Fascinator
##

##
## Parse a template
## $template : The template to parse
##
#macro(parseTemplate $template)
    #set($templatePath = $Services.velocityService.resourceExists($portalId, $template))
    #parse($templatePath)
#end

#macro(parseDisplayTemplate $template)
    #set($templatePath = $Services.velocityService.resourceExists($portalId, "display/$displayType/$template"))
    #parse($templatePath)
#end

##
## Render an object display
## $template : The template to render
## $metadata : Object metadata in Solr JSON format
##
#macro(renderObject $metadata $template)
    $Services.pageService.renderObject($velocityContext, $template, $metadata)
#end


##
## Display a string based on the message code
##
## $message : the message code
##
#macro(displayMessage $message)
## All on one line to avoid line breaks
#set($languageService = $Services.getService("languageService"))#if($languageService && $message)#set($message = $languageService.displayMessage($message))#end$message#end

##
## Display an arrary of strings in an unorder list
##
## $vals : an array of strings for display
##
#macro(displayUL $vals)
	#displayList("ul" $vals)
#end

##
## Display an arrary of strings in a list
##
## $listType : either ul or ol
## $vals : an array of strings for display
##
#macro(displayList $listType $vals)
<$listType>
	#foreach( $v in $vals )
	#if ($v && $v != 'null' && $!v != "")
	<li>$page.escapeHtml($v)</li> #end
	#end
</$listType>
#end